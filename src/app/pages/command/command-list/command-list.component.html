<!-- Filter -->
<div class="example-header">
  <mat-form-field>
    <input matInput #filter (keyup)="applyFilter($event)" placeholder="Rechercher...">
  </mat-form-field>
</div>

<tc-card [title]="'Liste des commandes'" [padding]="0">
  <div class="table-responsive">
    <table mat-table [dataSource]="commands">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>

      <!-- PhotoArticle Column -->
      <ng-container matColumnDef="PhotoArticle">
        <th mat-header-cell *matHeaderCellDef class="th-left"> Photo </th>
        <td mat-cell *matCellDef="let element" style="padding-top: 10px; padding-bottom: 10px;">
          <div class="avatar-upload d-flex justify-content-left" *ngIf="element.PhotoArticle !== null && element.PhotoArticle !== ''">
            <div class="avatar-preview-detail">
              <div id="imagePreview"
                   [style.background-image]="'url('+ element.PhotoArticle +')'"
                   class="image-preview">
              </div>
            </div>
          </div>
          <div class="avatar-upload d-flex justify-content-left" *ngIf="element.PhotoArticle === null || element.PhotoArticle === ''">
            <div class="avatar-preview-detail">
              <div id="imagePreview"
                   [style.background-image]="'url(assets/content/no-image.png)'"
                   class="image-preview">
              </div>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- NumeroCommand Column -->
      <ng-container matColumnDef="NumeroCommand">
        <th mat-header-cell *matHeaderCellDef>N° Commande</th>
        <td mat-cell *matCellDef="let element">
          <a [routerLink]="" (click)="goToEditCommand(element.id)" style="color: #0d6efd; cursor: pointer;">
            {{ element.NumeroCommand }}
          </a>
        </td>
      </ng-container>

      <!-- TitreArticle Column -->
      <ng-container matColumnDef="TitreArticle">
        <th mat-header-cell *matHeaderCellDef>Article</th>
        <td mat-cell *matCellDef="let element">
            {{ element.TitreArticle }}
        </td>
      </ng-container>

      <!-- Quantite Column -->
      <ng-container matColumnDef="Quantite">
        <th mat-header-cell *matHeaderCellDef class="th-center">Quantité</th>
        <td mat-cell *matCellDef="let element" class="th-center">
            {{ element.Quantite }}
        </td>
      </ng-container>

      <!-- NomPrenomAcheteur Column -->
      <ng-container matColumnDef="NomPrenomAcheteur">
        <th mat-header-cell *matHeaderCellDef>Nom prénom</th>
        <td mat-cell *matCellDef="let element">
            {{ element.NomPrenomAcheteur }}
        </td>
      </ng-container>

       <!-- TelephoneAcheteur Column -->
       <ng-container matColumnDef="TelephoneAcheteur">
        <th mat-header-cell *matHeaderCellDef class="th-center">Téléphone</th>
        <td mat-cell *matCellDef="let element" class="th-center">
            {{ element.TelephoneAcheteur }}
        </td>
      </ng-container>

      <!-- WilayaAcheteur Column -->
      <ng-container matColumnDef="WilayaAcheteur">
        <th mat-header-cell *matHeaderCellDef class="th-center">Wilaya</th>
        <td mat-cell *matCellDef="let element" class="th-center">
            {{ element.WilayaAcheteur }}
        </td>
      </ng-container>

      <!-- CreatedDateString Column -->
      <ng-container matColumnDef="CreatedDateString">
        <th mat-header-cell *matHeaderCellDef>Date création</th>
        <td mat-cell *matCellDef="let element">
            {{ element.CreatedDateString }}
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <div class="demo-list flex-nowrap align-items-center justify-content-end">
            <button tc-button (click)="goToEditCommand(element.id)" [afterIcon]="'sli-pencil'" [view]="'accent'" [square]="true" [outline]="true" [tcShape]="'50%'"></button>
            <button tc-button (click)="openDialog(element.id, element.Titre)" [afterIcon]="'sli-trash'" [view]="'error'" [square]="true" [tcShape]="'50%'"></button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="getDisplayedColumns()"></tr>
      <tr mat-row *matRowDef="let row; columns: getDisplayedColumns();"></tr>
    </table>
  </div>
</tc-card>

